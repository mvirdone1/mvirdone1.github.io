<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Table to JSON</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.7.5/proj4.js"></script>

    <script src="helper.js"></script>
    <script src="findwsr88radars.js"></script>

    <script>
      function fetchTableToJson(url) {
        $.get(url, function (data) {
          // Create a DOM element to hold the fetched page content
          var $page = $("<div>").html(data);

          // Initialize an array to store the JSON objects
          var tableData = [];

          // Select all rows of the table except the header
          $page.find("table tr").each(function (index) {
            if (index === 0) return; // Skip the header row

            // Select all cells in the current row
            var cells = $(this).find("td");

            var latLonArray = splitLatLonStringAndConvert(
              cells.eq(3).text().trim()
            );
            //console.log(latLonArray);

            // Create an object to store the cell data
            var rowData = {
              wban: cells.eq(0).text().trim(),
              stationId: cells.eq(1).text().trim(),
              stationName: cells.eq(2).text().trim(),
              lat: latLonArray.lat,
              lon: latLonArray.lon,
              elevationFt: cells.eq(4).text().trim(),
              towerHeightM: cells.eq(5).text().trim(),
            };

            // Add the row data object to the array
            tableData.push(rowData);
          });

          // Convert the array to JSON
          var json = JSON.stringify(tableData, null, 2);

          // Output the JSON to the console
          // console.log(json);

          // Display the JSON on the page
          // $("#output").text(json);
        });
      }

      function splitLatLonStringAndConvert(cellText) {
        var latLonArray = cellText.split(" / ");
        var lat = parseInt(latLonArray[0]);
        var lon = parseInt(latLonArray[1]);

        const numDecimals = 4;
        const divisor = 10 ** numDecimals;

        // The longitude is an integer that is unsigned
        var lonDirection = -1;

        // A few of the list items are in the eastern hemisphere
        if (
          latLonArray[1].charAt(latLonArray[1].length - 1).toUpperCase() === "E"
        ) {
          lonDirection = 1;
        }

        lat = lat / divisor;
        lon = lonDirection * (lon / divisor);
        return { lat, lon };
      }

      $(document).ready(function () {
        fetchTableToJson(
          "https://apollo.nvu.vsc.edu/classes/remote/lecture_notes/radar/88d/88D_locations.html"
        );
      });
    </script>
  </head>
  <body>
    <h1>Table to JSON</h1>
    <p>
      Scrape content from
      <a
        href="https://apollo.nvu.vsc.edu/classes/remote/lecture_notes/radar/88d/88D_locations.html"
        >https://apollo.nvu.vsc.edu/classes/remote/lecture_notes/radar/88d/88D_locations.html</a
      >
      and convert the UTM to Lat Lon and export as JSON
    </p>
    <!--    hidden="hidden"-->

    <table border="2" id="parseme" cellpadding="0" width="100%">
      <tr>
        <td>
          <font color="#FF0000"><b>WBAN #</b></font>
        </td>
        <td>
          <font color="#FF0000"><b>STATION ID</b></font>
        </td>
        <td>
          <font color="#FF0000"><b>STATION NAME</b></font>
        </td>
        <td>
          <font color="#FF0000"><b>LAT N/ LONG W (deg,min,sec)</b></font>
        </td>
        <td>
          <font color="#FF0000"><b>ELEV (ft)</b></font>
        </td>
        <td>
          <font color="#FF0000"><b>TOWER HEIGHT (m)</b></font>
        </td>
      </tr>
      <tr>
        <td>14929</td>
        <td>KABR</td>
        <td>Aberdeen, SD</td>
        <td>452721 / 0982447</td>
        <td>1302</td>
        <td>20</td>
      </tr>
      <tr>
        <td>54766</td>
        <td>KENX</td>
        <td>Albany, NY</td>
        <td>423511 / 0740350</td>
        <td>1826</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03019</td>
        <td>KABX</td>
        <td>Albuquerque, NM</td>
        <td>350859 / 1064926</td>
        <td>5870</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03981</td>
        <td>KFDR</td>
        <td>Altus AFB, OK</td>
        <td>342144 / 0985835</td>
        <td>1267</td>
        <td>10</td>
      </tr>
      <tr>
        <td>23047</td>
        <td>KAMA</td>
        <td>Amarillo, TX</td>
        <td>351400 / 1014233</td>
        <td>3587</td>
        <td>20</td>
      </tr>
      <tr>
        <td>26548</td>
        <td>PAHG</td>
        <td>Anchorage, AK</td>
        <td>604333 / 1512105</td>
        <td>242</td>
        <td>30</td>
      </tr>
      <tr>
        <td>41417</td>
        <td>PGUA</td>
        <td>Anderson AFB, GU</td>
        <td>132709 / 1444841E</td>
        <td>264</td>
        <td>30</td>
      </tr>
      <tr>
        <td>53819</td>
        <td>KFFC</td>
        <td>Atlanta, GA</td>
        <td>332149 / 0843357</td>
        <td>858</td>
        <td>30</td>
      </tr>
      <tr>
        <td>12971</td>
        <td>KEWX</td>
        <td>Austin/San Antonio, TX</td>
        <td>294214 / 0980142</td>
        <td>633</td>
        <td>20</td>
      </tr>
      <tr>
        <td>93240</td>
        <td>KBBX</td>
        <td>Beale AFB, CA</td>
        <td>392946 / 1213754</td>
        <td>167</td>
        <td>10</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>PABC</td>
        <td>Bethel, AK</td>
        <td>604731 / 1615235</td>
        <td>162</td>
        <td>5</td>
      </tr>
      <tr>
        <td>94096</td>
        <td>KBLX</td>
        <td>Billings, MT</td>
        <td>455114 / 1083624</td>
        <td>3598</td>
        <td>10</td>
      </tr>
      <tr>
        <td>04725</td>
        <td>KBGM</td>
        <td>Binghamton, NY</td>
        <td>421159 / 0755905</td>
        <td>1606</td>
        <td>20</td>
      </tr>
      <tr>
        <td>53823</td>
        <td>KBMX</td>
        <td>Birmingham, AL</td>
        <td>331020 / 0864611</td>
        <td>645</td>
        <td>30</td>
      </tr>
      <tr>
        <td>24011</td>
        <td>KBIS</td>
        <td>Bismarck, ND</td>
        <td>464615 / 1004538</td>
        <td>1658</td>
        <td>20</td>
      </tr>
      <tr>
        <td>04101</td>
        <td>KCBX</td>
        <td>Boise, ID</td>
        <td>432926 / 1161408</td>
        <td>3061</td>
        <td>20</td>
      </tr>
      <tr>
        <td>54765</td>
        <td>KBOX</td>
        <td>Boston, MA</td>
        <td>415721 / 0710813</td>
        <td>118</td>
        <td>30</td>
      </tr>
      <tr>
        <td>12919</td>
        <td>KBRO</td>
        <td>Brownsville, TX</td>
        <td>255458 / 0972508</td>
        <td>23</td>
        <td>10</td>
      </tr>
      <tr>
        <td>14733</td>
        <td>KBUF</td>
        <td>Buffalo, NY</td>
        <td>425656 / 0784412</td>
        <td>693</td>
        <td>20</td>
      </tr>
      <tr>
        <td>54774</td>
        <td>KCXX</td>
        <td>Burlington, VT</td>
        <td>443040 / 0731001</td>
        <td>317</td>
        <td>30</td>
      </tr>
      <tr>
        <td>43216</td>
        <td>RKSG</td>
        <td>Camp Humphreys, Korea</td>
        <td>365721 / 1270116E</td>
        <td>52</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03022</td>
        <td>KFDX</td>
        <td>Cannon AFB, NM</td>
        <td>343807 / 1033748</td>
        <td>4650</td>
        <td>10</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>KICX</td>
        <td>Cedar City, UT</td>
        <td>373527 / 1125144</td>
        <td>10600</td>
        <td>30</td>
      </tr>
      <tr>
        <td>53845</td>
        <td>KCLX</td>
        <td>Charleston, SC</td>
        <td>323920 / 0810232</td>
        <td>97</td>
        <td>30</td>
      </tr>
      <tr>
        <td>53834</td>
        <td>KRLX</td>
        <td>Charleston, WV</td>
        <td>381840 / 0814323</td>
        <td>1080</td>
        <td>30</td>
      </tr>
      <tr>
        <td>24018</td>
        <td>KCYS</td>
        <td>Cheyenne, WY</td>
        <td>410907 / 1044822</td>
        <td>6128</td>
        <td>10</td>
      </tr>
      <tr>
        <td>04831</td>
        <td>KLOT</td>
        <td>Chicago, IL</td>
        <td>413617 / 0880505</td>
        <td>663</td>
        <td>20</td>
      </tr>
      <tr>
        <td>13841</td>
        <td>KILN</td>
        <td>Cincinnati, OH</td>
        <td>392513 / 0834918</td>
        <td>1056</td>
        <td>30</td>
      </tr>
      <tr>
        <td>14820</td>
        <td>KCLE</td>
        <td>Cleveland, OH</td>
        <td>412447 / 0815135</td>
        <td>763</td>
        <td>20</td>
      </tr>
      <tr>
        <td>13883</td>
        <td>KCAE</td>
        <td>Columbia, SC</td>
        <td>335655 / 0810706</td>
        <td>231</td>
        <td>30</td>
      </tr>
      <tr>
        <td>53837</td>
        <td>KGWX</td>
        <td>Columbus AFB, MS</td>
        <td>335348 / 0881944</td>
        <td>476</td>
        <td>20</td>
      </tr>
      <tr>
        <td>12924</td>
        <td>KCRP</td>
        <td>Corpus Christi, TX</td>
        <td>274703 / 0973040</td>
        <td>45</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03985</td>
        <td>KFWS</td>
        <td>Dallas/Ft. Worth, TX</td>
        <td>323423 / 0971811</td>
        <td>683</td>
        <td>20</td>
      </tr>
      <tr>
        <td>94982</td>
        <td>KDVN</td>
        <td>Davenport, IA</td>
        <td>413642 / 0903451</td>
        <td>754</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03018</td>
        <td>KFTG</td>
        <td>Denver, CO</td>
        <td>394712 / 1043245</td>
        <td>5497</td>
        <td>30</td>
      </tr>
      <tr>
        <td>94984</td>
        <td>KDMX</td>
        <td>Des Moines, IA</td>
        <td>414352 / 0934322</td>
        <td>981</td>
        <td>30</td>
      </tr>
      <tr>
        <td>04830</td>
        <td>KDTX</td>
        <td>Detroit, MI</td>
        <td>424159 / 0832818</td>
        <td>1072</td>
        <td>30</td>
      </tr>
      <tr>
        <td>13985</td>
        <td>KDDC</td>
        <td>Dodge City, KS</td>
        <td>374539 / 0995808</td>
        <td>2590</td>
        <td>20</td>
      </tr>
      <tr>
        <td>93770</td>
        <td>KDOX</td>
        <td>Dover AFB, DE</td>
        <td>384932 / 0752623</td>
        <td>50</td>
        <td>30</td>
      </tr>
      <tr>
        <td>14913</td>
        <td>KDLH</td>
        <td>Duluth, MN</td>
        <td>465013 / 0921235</td>
        <td>1428</td>
        <td>30</td>
      </tr>
      <tr>
        <td>03987</td>
        <td>KDYX</td>
        <td>Dyess AFB, TX</td>
        <td>323218 / 0991516</td>
        <td>1517</td>
        <td>10</td>
      </tr>
      <tr>
        <td>53114</td>
        <td>KEYX</td>
        <td>Edwards AFB, CA</td>
        <td>350552 / 1173339</td>
        <td>2757</td>
        <td>20</td>
      </tr>
      <tr>
        <td>53825</td>
        <td>KEVX</td>
        <td>Eglin AFB, FL</td>
        <td>303352 / 0855517</td>
        <td>140</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03020</td>
        <td>KEPZ</td>
        <td>El Paso, TX</td>
        <td>315223 / 1064153</td>
        <td>4104</td>
        <td>30</td>
      </tr>
      <tr>
        <td>04108</td>
        <td>KLRX</td>
        <td>Elko, NV</td>
        <td>404423 / 1164810</td>
        <td>6744</td>
        <td>30</td>
      </tr>
      <tr>
        <td>94289</td>
        <td>KBHX</td>
        <td>Eureka, CA</td>
        <td>402954 / 1241731</td>
        <td>2402</td>
        <td>30</td>
      </tr>
      <tr>
        <td>24690</td>
        <td>PAPD</td>
        <td>Fairbanks, AK</td>
        <td>650206 / 1473006</td>
        <td>2593</td>
        <td>30</td>
      </tr>
      <tr>
        <td>53113</td>
        <td>KFSX</td>
        <td>Flagstaff, AZ</td>
        <td>343428 / 1111152</td>
        <td>7417</td>
        <td>20</td>
      </tr>
      <tr>
        <td>53839</td>
        <td>KHPX</td>
        <td>Fort Campbell, KY</td>
        <td>364412 / 0871706</td>
        <td>576</td>
        <td>10</td>
      </tr>
      <tr>
        <td>03992</td>
        <td>KGRK</td>
        <td>Fort Hood, TX</td>
        <td>304319 / 0972259</td>
        <td>538</td>
        <td>10</td>
      </tr>
      <tr>
        <td>03993</td>
        <td>KPOE</td>
        <td>Fort Polk, LA</td>
        <td>310920 / 0925833</td>
        <td>408</td>
        <td>10</td>
      </tr>
      <tr>
        <td>53851</td>
        <td>KEOX</td>
        <td>Fort Rucker, AL</td>
        <td>312738 / 0852734</td>
        <td>434</td>
        <td>10</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>KSRX</td>
        <td>Fort Smith, AR</td>
        <td>351726 / 0942142</td>
        <td>640</td>
        <td>20</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>KIWX</td>
        <td>Fort Wayne, IN</td>
        <td>412132 / 0854200</td>
        <td>960</td>
        <td>25</td>
      </tr>
      <tr>
        <td>04837</td>
        <td>KAPX</td>
        <td>Gaylord, MI</td>
        <td>445426 / 0844311</td>
        <td>1464</td>
        <td>20</td>
      </tr>
      <tr>
        <td>94008</td>
        <td>KGGW</td>
        <td>Glasgow, MT</td>
        <td>481223 / 1063730</td>
        <td>2276</td>
        <td>20</td>
      </tr>
      <tr>
        <td>23065</td>
        <td>KGLD</td>
        <td>Goodland, KS</td>
        <td>392201 / 1014201</td>
        <td>3651</td>
        <td>10</td>
      </tr>
      <tr>
        <td>94986</td>
        <td>KMVX</td>
        <td>Grand Forks, ND</td>
        <td>473140 / 0971932</td>
        <td>986</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03025</td>
        <td>KGJX</td>
        <td>Grand Junction, Co</td>
        <td>390344 / 1081250</td>
        <td>9991</td>
        <td>10</td>
      </tr>
      <tr>
        <td>94860</td>
        <td>KGRR</td>
        <td>Grand Rapids, MI</td>
        <td>425338 / 0853241</td>
        <td>778</td>
        <td>20</td>
      </tr>
      <tr>
        <td>04102</td>
        <td>KTFX</td>
        <td>Great Falls, MT</td>
        <td>472735 / 1112307</td>
        <td>3714</td>
        <td>10</td>
      </tr>
      <tr>
        <td>14898</td>
        <td>KGRB</td>
        <td>Green Bay, WI</td>
        <td>442954 / 0880641</td>
        <td>682</td>
        <td>30</td>
      </tr>
      <tr>
        <td>03870</td>
        <td>KGSP</td>
        <td>Greer, SC</td>
        <td>345300 / 0821312</td>
        <td>940</td>
        <td>30</td>
      </tr>
      <tr>
        <td>54763</td>
        <td>KRMX</td>
        <td>Griffiss AFB, NY</td>
        <td>432804 / 0752728</td>
        <td>1516</td>
        <td>30</td>
      </tr>
      <tr>
        <td>94981</td>
        <td>KUEX</td>
        <td>Hastings, NE</td>
        <td>401915 / 0982631</td>
        <td>1976</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03023</td>
        <td>KHDX</td>
        <td>Holloman AFB, NM</td>
        <td>330435 / 1060722</td>
        <td>4222</td>
        <td>10</td>
      </tr>
      <tr>
        <td>94625</td>
        <td>KCBW</td>
        <td>Houlton, ME</td>
        <td>460221 / 0674823</td>
        <td>746</td>
        <td>30</td>
      </tr>
      <tr>
        <td>03980</td>
        <td>KHGX</td>
        <td>Houston/Galveston, TX</td>
        <td>292819 / 0950445</td>
        <td>18</td>
        <td>20</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>KHTX</td>
        <td>Huntsville, AL</td>
        <td>345550 / 0860500</td>
        <td>1760</td>
        <td>15</td>
      </tr>
      <tr>
        <td>93819</td>
        <td>KIND</td>
        <td>Indianapolis, IN</td>
        <td>394227 / 0861649</td>
        <td>790</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03889</td>
        <td>KJKL</td>
        <td>Jackson, KY</td>
        <td>373527 / 0831847</td>
        <td>1364</td>
        <td>25</td>
      </tr>
      <tr>
        <td>03940</td>
        <td>KJAN</td>
        <td>Jackson, MS</td>
        <td>321904 / 0900448</td>
        <td>297</td>
        <td>20</td>
      </tr>
      <tr>
        <td>13889</td>
        <td>KJAX</td>
        <td>Jacksonville, FL</td>
        <td>302905 / 0814207</td>
        <td>33</td>
        <td>20</td>
      </tr>
      <tr>
        <td>42219</td>
        <td>RODN</td>
        <td>Kadena, Okinawa</td>
        <td>261807 / 1275435E</td>
        <td>218</td>
        <td>30</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>PHKN</td>
        <td>Kamuela, HI</td>
        <td>200732 / 1554640</td>
        <td>3812</td>
        <td>30</td>
      </tr>
      <tr>
        <td>03983</td>
        <td>KEAX</td>
        <td>Kansas City, MO</td>
        <td>384837 / 0941552</td>
        <td>995</td>
        <td>20</td>
      </tr>
      <tr>
        <td>92804</td>
        <td>KBYX</td>
        <td>Key West, FL</td>
        <td>243551 / 0814211</td>
        <td>8</td>
        <td>20</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>PAKC</td>
        <td>King Salmon, AK</td>
        <td>584046 / 1563746</td>
        <td>63</td>
        <td>20</td>
      </tr>
      <tr>
        <td>53832</td>
        <td>KMRX</td>
        <td>Knoxville/Tri-Cities, TN</td>
        <td>361007 / 0832406</td>
        <td>1337</td>
        <td>20</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>RKJK</td>
        <td>Kunsan AB, Korea</td>
        <td>355527 / 1263720E</td>
        <td>78</td>
        <td>30</td>
      </tr>
      <tr>
        <td>94987</td>
        <td>KARX</td>
        <td>La Crosse, WI</td>
        <td>434922 / 0911128</td>
        <td>1276</td>
        <td>20</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>LPLA</td>
        <td>Lajes AB, Azores</td>
        <td>384349 / 0271918</td>
        <td>3334</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03937</td>
        <td>KLCH</td>
        <td>Lake Charles, LA</td>
        <td>300731 / 0931257</td>
        <td>13</td>
        <td>20</td>
      </tr>
      <tr>
        <td>53110</td>
        <td>KESX</td>
        <td>Las Vegas, NV</td>
        <td>354204 / 1145329</td>
        <td>4867</td>
        <td>20</td>
      </tr>
      <tr>
        <td>22015</td>
        <td>KDFX</td>
        <td>Laughlin AFB, TX</td>
        <td>291622 / 1001650</td>
        <td>1131</td>
        <td>10</td>
      </tr>
      <tr>
        <td>04833</td>
        <td>KILX</td>
        <td>Lincoln, IL</td>
        <td>400902 / 0892013</td>
        <td>582</td>
        <td>30</td>
      </tr>
      <tr>
        <td>03952</td>
        <td>KLZK</td>
        <td>Little Rock, AR</td>
        <td>345011 / 0921544</td>
        <td>568</td>
        <td>20</td>
      </tr>
      <tr>
        <td>53101</td>
        <td>KVTX</td>
        <td>Los Angeles, CA</td>
        <td>342442 / 1191046</td>
        <td>2726</td>
        <td>20</td>
      </tr>
      <tr>
        <td>53827</td>
        <td>KLVX</td>
        <td>Louisville, KY</td>
        <td>375831 / 0855638</td>
        <td>719</td>
        <td>30</td>
      </tr>
      <tr>
        <td>23042</td>
        <td>KLBB</td>
        <td>Lubbock, TX</td>
        <td>333915 / 1014851</td>
        <td>3259</td>
        <td>20</td>
      </tr>
      <tr>
        <td>94850</td>
        <td>KMQT</td>
        <td>Marquette, MI</td>
        <td>463152 / 0873254</td>
        <td>1411</td>
        <td>30</td>
      </tr>
      <tr>
        <td>53826</td>
        <td>KMXX</td>
        <td>Maxwell AFB, AL</td>
        <td>323212 / 0854723</td>
        <td>400</td>
        <td>30</td>
      </tr>
      <tr>
        <td>94296</td>
        <td>KMAX</td>
        <td>Medford, OR</td>
        <td>420452 / 1224302</td>
        <td>7513</td>
        <td>10</td>
      </tr>
      <tr>
        <td>12838</td>
        <td>KMLB</td>
        <td>Melbourne, FL</td>
        <td>280648 / 0803915</td>
        <td>35</td>
        <td>20</td>
      </tr>
      <tr>
        <td>93839</td>
        <td>KNQA</td>
        <td>Memphis, TN</td>
        <td>352041 / 0895224</td>
        <td>282</td>
        <td>20</td>
      </tr>
      <tr>
        <td>12899</td>
        <td>KAMX</td>
        <td>Miami, FL</td>
        <td>253640 / 0802446</td>
        <td>14</td>
        <td>20</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>PAIH</td>
        <td>Middleton Island, AK</td>
        <td>592741 / 1461811</td>
        <td>67</td>
        <td>10</td>
      </tr>
      <tr>
        <td>23023</td>
        <td>KMAF</td>
        <td>Midland/Odessa, TX</td>
        <td>315636 / 1021121</td>
        <td>2868</td>
        <td>10</td>
      </tr>
      <tr>
        <td>04834</td>
        <td>KMKX</td>
        <td>Milwaukee, WI</td>
        <td>425804 / 0883302</td>
        <td>958</td>
        <td>10</td>
      </tr>
      <tr>
        <td>94983</td>
        <td>KMPX</td>
        <td>Minneapolis/St. Paul, MN</td>
        <td>445056 / 0933356</td>
        <td>946</td>
        <td>30</td>
      </tr>
      <tr>
        <td>94048</td>
        <td>KMBX</td>
        <td>Minot AFB, ND</td>
        <td>482333 / 1005154</td>
        <td>1493</td>
        <td>20</td>
      </tr>
      <tr>
        <td>04103</td>
        <td>KMSX</td>
        <td>Missoula, MT</td>
        <td>470228 / 1135910</td>
        <td>7855</td>
        <td>10</td>
      </tr>
      <tr>
        <td>13894</td>
        <td>KMOB</td>
        <td>Mobile, AL</td>
        <td>304046 / 0881423</td>
        <td>208</td>
        <td>20</td>
      </tr>
      <tr>
        <td>22547</td>
        <td>PHMO</td>
        <td>Molokai, HI</td>
        <td>210758 / 1571048</td>
        <td>1363</td>
        <td>20</td>
      </tr>
      <tr>
        <td>53856</td>
        <td>KVAX</td>
        <td>Moody AFB, GA</td>
        <td>302325 / 0830006</td>
        <td>173</td>
        <td>30</td>
      </tr>
      <tr>
        <td>93768</td>
        <td>KMHX</td>
        <td>Morehead City, NC</td>
        <td>344634 / 0765234</td>
        <td>31</td>
        <td>30</td>
      </tr>
      <tr>
        <td>53833</td>
        <td>KOHX</td>
        <td>Nashville, TN</td>
        <td>361450 / 0863345</td>
        <td>579</td>
        <td>20</td>
      </tr>
      <tr>
        <td>53813</td>
        <td>KLIX</td>
        <td>New Orleans, LA</td>
        <td>302012 / 0894932</td>
        <td>24</td>
        <td>30</td>
      </tr>
      <tr>
        <td>94703</td>
        <td>KOKX</td>
        <td>New York City, NY</td>
        <td>405156 / 0725150</td>
        <td>85</td>
        <td>30</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>PAEC</td>
        <td>Nome, AK</td>
        <td>643041 / 1651742</td>
        <td>54</td>
        <td>5</td>
      </tr>
      <tr>
        <td>93773</td>
        <td>KAKQ</td>
        <td>Norfolk/Richmond, VA</td>
        <td>365902 / 0770026</td>
        <td>112</td>
        <td>20</td>
      </tr>
      <tr>
        <td>94049</td>
        <td>KLNX</td>
        <td>North Platte, NE</td>
        <td>415728 / 1003435</td>
        <td>2970</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03979</td>
        <td>KTLX</td>
        <td>Oklahoma City, OK</td>
        <td>351959 / 0971640</td>
        <td>1213</td>
        <td>15</td>
      </tr>
      <tr>
        <td>94980</td>
        <td>KOAX</td>
        <td>Omaha, NE</td>
        <td>411913 / 0962200</td>
        <td>1148</td>
        <td>30</td>
      </tr>
      <tr>
        <td>03816</td>
        <td>KPAH</td>
        <td>Paducah, KY</td>
        <td>370406 / 0884619</td>
        <td>392</td>
        <td>30</td>
      </tr>
      <tr>
        <td>24155</td>
        <td>KPDT</td>
        <td>Pendleton, OR</td>
        <td>454126 / 1185110</td>
        <td>1515</td>
        <td>10</td>
      </tr>
      <tr>
        <td>93771</td>
        <td>KDIX</td>
        <td>Philadelphia, PA</td>
        <td>395649 / 0742439</td>
        <td>149</td>
        <td>20</td>
      </tr>
      <tr>
        <td>23104</td>
        <td>KIWA</td>
        <td>Phoenix, AZ</td>
        <td>331721 / 1114012</td>
        <td>1353</td>
        <td>10</td>
      </tr>
      <tr>
        <td>04832</td>
        <td>KPBZ</td>
        <td>Pittsburgh, PA</td>
        <td>403154 / 0801305</td>
        <td>1185</td>
        <td>20</td>
      </tr>
      <tr>
        <td>04107</td>
        <td>KSFX</td>
        <td>Pocatello/Idaho Falls, ID</td>
        <td>430621 / 1124110</td>
        <td>4474</td>
        <td>10</td>
      </tr>
      <tr>
        <td>54762</td>
        <td>KGYX</td>
        <td>Portland, ME</td>
        <td>435329 / 0701523</td>
        <td>409</td>
        <td>10</td>
      </tr>
      <tr>
        <td>94288</td>
        <td>KRTX</td>
        <td>Portland, OR</td>
        <td>454253 / 1225755</td>
        <td>1572</td>
        <td>30</td>
      </tr>
      <tr>
        <td>03021</td>
        <td>KPUX</td>
        <td>Pueblo, CO</td>
        <td>382734 / 1041053</td>
        <td>5249</td>
        <td>10</td>
      </tr>
      <tr>
        <td>93772</td>
        <td>KRAX</td>
        <td>Raleigh/Durham, NC</td>
        <td>353956 / 0782923</td>
        <td>348</td>
        <td>30</td>
      </tr>
      <tr>
        <td>94047</td>
        <td>KUDX</td>
        <td>Rapid City, SD</td>
        <td>440730 / 1024947</td>
        <td>3016</td>
        <td>30</td>
      </tr>
      <tr>
        <td>53104</td>
        <td>KRGX</td>
        <td>Reno, NV</td>
        <td>394515 / 1192744</td>
        <td>8299</td>
        <td>20</td>
      </tr>
      <tr>
        <td>24061</td>
        <td>KRIW</td>
        <td>Riverton, WY</td>
        <td>430358 / 1082838</td>
        <td>5568</td>
        <td>10</td>
      </tr>
      <tr>
        <td>53831</td>
        <td>KFCX</td>
        <td>Roanoke, VA</td>
        <td>370128 / 0801626</td>
        <td>2868</td>
        <td>20</td>
      </tr>
      <tr>
        <td>53824</td>
        <td>KJGX</td>
        <td>Robins AFB, GA</td>
        <td>324031 / 0832104</td>
        <td>521</td>
        <td>20</td>
      </tr>
      <tr>
        <td>93235</td>
        <td>KDAX</td>
        <td>Sacramento, CA</td>
        <td>383004 / 1214040</td>
        <td>30</td>
        <td>30</td>
      </tr>
      <tr>
        <td>03982</td>
        <td>KLSX</td>
        <td>Saint Louis, MO</td>
        <td>384156 / 0904058</td>
        <td>608</td>
        <td>30</td>
      </tr>
      <tr>
        <td>04104</td>
        <td>KMTX</td>
        <td>Salt Lake City, UT</td>
        <td>411546 / 1122652</td>
        <td>6460</td>
        <td>30</td>
      </tr>
      <tr>
        <td>23034</td>
        <td>KSJT</td>
        <td>San Angelo, TX</td>
        <td>312217 / 1002933</td>
        <td>1890</td>
        <td>30</td>
      </tr>
      <tr>
        <td>53115</td>
        <td>KNKX</td>
        <td>San Diego, CA</td>
        <td>325508 / 1170231</td>
        <td>955</td>
        <td>20</td>
      </tr>
      <tr>
        <td>93236</td>
        <td>KMUX</td>
        <td>San Francisco, CA</td>
        <td>370919 / 1215354</td>
        <td>3469</td>
        <td>20</td>
      </tr>
      <tr>
        <td>53111</td>
        <td>KHNX</td>
        <td>San Joaquin Valley, CA</td>
        <td>361851 / 1193756</td>
        <td>243</td>
        <td>20</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>TJUA</td>
        <td>San Juan, PR</td>
        <td>180656 / 0660441</td>
        <td>2794</td>
        <td>30</td>
      </tr>
      <tr>
        <td>53117</td>
        <td>KSOX</td>
        <td>Santa Ana Mountains, CA</td>
        <td>334904 / 1173809</td>
        <td>3027</td>
        <td>15</td>
      </tr>
      <tr>
        <td>94287</td>
        <td>KATX</td>
        <td>Seattle/Tacoma, WA</td>
        <td>481140 / 1222945</td>
        <td>494</td>
        <td>30</td>
      </tr>
      <tr>
        <td>13957</td>
        <td>KSHV</td>
        <td>Shreveport, LA</td>
        <td>322703 / 0935029</td>
        <td>273</td>
        <td>30</td>
      </tr>
      <tr>
        <td>14944</td>
        <td>KFSD</td>
        <td>Sioux Falls, SD</td>
        <td>433516 / 0964346</td>
        <td>1430</td>
        <td>10</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>PACG</td>
        <td>Sitka, AK</td>
        <td>565110 / 1353145</td>
        <td>209</td>
        <td>10</td>
      </tr>
      <tr>
        <td>22548</td>
        <td>PHKI</td>
        <td>South Kauai, HI</td>
        <td>215339 / 1593308</td>
        <td>179</td>
        <td>30</td>
      </tr>
      <tr>
        <td>PENDING</td>
        <td>PHWA</td>
        <td>South Shore, HI</td>
        <td>190542 / 1553408</td>
        <td>1380</td>
        <td>20</td>
      </tr>
      <tr>
        <td>04106</td>
        <td>KOTX</td>
        <td>Spokane, WA</td>
        <td>474049 / 1173736</td>
        <td>2384</td>
        <td>10</td>
      </tr>
      <tr>
        <td>13995</td>
        <td>KSGF</td>
        <td>Springfield, MO</td>
        <td>371407 / 0932402</td>
        <td>1278</td>
        <td>20</td>
      </tr>
      <tr>
        <td>54764</td>
        <td>KCCX</td>
        <td>State College, PA</td>
        <td>405523 / 0780013</td>
        <td>2405</td>
        <td>20</td>
      </tr>
      <tr>
        <td>93767</td>
        <td>KLWX</td>
        <td>Sterling, VA</td>
        <td>385831 / 0772840</td>
        <td>272</td>
        <td>25</td>
      </tr>
      <tr>
        <td>93805</td>
        <td>KTLH</td>
        <td>Tallahassee, FL</td>
        <td>302351 / 0841944</td>
        <td>63</td>
        <td>30</td>
      </tr>
      <tr>
        <td>92801</td>
        <td>KTBW</td>
        <td>Tampa, FL</td>
        <td>274220 / 0822406</td>
        <td>41</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03986</td>
        <td>KTWX</td>
        <td>Topeka, KS</td>
        <td>385949 / 0961357</td>
        <td>1367</td>
        <td>10</td>
      </tr>
      <tr>
        <td>53112</td>
        <td>KEMX</td>
        <td>Tucson, AZ</td>
        <td>315337 / 1103749</td>
        <td>5205</td>
        <td>30</td>
      </tr>
      <tr>
        <td>03984</td>
        <td>KINX</td>
        <td>Tulsa, OK</td>
        <td>361030 / 0953353</td>
        <td>668</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03995</td>
        <td>KVNX</td>
        <td>Vance AFB, OK</td>
        <td>364427 / 0980740</td>
        <td>1210</td>
        <td>10</td>
      </tr>
      <tr>
        <td>93234</td>
        <td>KVBX</td>
        <td>Vandenberg AFB, CA</td>
        <td>345017 / 1202349</td>
        <td>1223</td>
        <td>20</td>
      </tr>
      <tr>
        <td>03928</td>
        <td>KICT</td>
        <td>Wichita, KS</td>
        <td>373917 / 0972634</td>
        <td>1335</td>
        <td>10</td>
      </tr>
      <tr>
        <td>93774</td>
        <td>KLTX</td>
        <td>Wilmington, NC</td>
        <td>335922 / 0782544</td>
        <td>64</td>
        <td>20</td>
      </tr>
      <tr>
        <td>53116</td>
        <td>KYUX</td>
        <td>Yuma, AZ</td>
        <td>322943 / 1143924</td>
        <td>174</td>
        <td>10</td>
      </tr>
    </table>
    <pre id="output"></pre>

    <h2>JSON Output</h2>
    <pre id="json-output"></pre>

    <script>
      function parseLatLonFromTable() {
        var data = [];
        $("#parseme tr:gt(0)").each(function () {
          // Skip the header row
          const tds = $(this).find("td");
          const stationId = $(tds[1]).text().trim();
          const stationName = $(tds[2]).text().trim();
          const locationString = $(tds[3]).text().trim();

          // the string is formatted as "452721 / 0982447"
          // it is fixed spacing
          const splitLatLon = locationString.split(" / ");

          const latitudeStr = splitLatLon[0];
          const longitudeStr = splitLatLon[1];

          var lonPlusMinus = -1;
          if (longitudeStr.charAt(longitudeStr.length - 1) === "E") {
            lonPlusMinus = 1;
          }

          const latArray = [
            latitudeStr.substr(0, 2),
            latitudeStr.substr(2, 2),
            latitudeStr.substr(4, 2),
          ];

          const lonArray = [
            longitudeStr.substr(0, 3),
            longitudeStr.substr(3, 2),
            longitudeStr.substr(5, 2),
          ];

          //console.log(latArray);

          const minutes = 60;
          const seconds = minutes * 60;

          const latitude = (
            parseInt(latArray[0]) +
            parseInt(latArray[1]) / minutes +
            parseInt(latArray[2]) / seconds
          ).toFixed(5);

          const longitude = (
            lonPlusMinus * parseInt(lonArray[0]) +
            parseInt(lonArray[1]) / minutes +
            parseInt(lonArray[2]) / seconds
          ).toFixed(5);

          data.push({
            stationId: stationId,
            stationName: stationName,
            latitude: latitude,
            longitude: longitude,
          });

          /*
          // Skip any elements that have NaN Lat or Lon
          if (!(isNaN(latitude) || isNaN(longitude))) {
            // Push the first row that has valid Lat Lon
            if (data.length == 0) {
              data.push({
                stationId: stationId,
                latitude: latitude,
                longitude: longitude,
              });
              console.log("First Entry");
              // Don't push if the station ID already exists
            } else if (stationId !== data[data.length - 1].stationId) {
              data.push({
                stationId: stationId,
                latitude: latitude,
                longitude: longitude,
              });
              console.log("Pushing station " + stationId);
            } else {
              console.log("Duplicate Station " + stationId);
            }
          }
        */
        });

        // https://documentation.sas.com/doc/en/etsug/15.2/etsug_sasenoaa_details02.htm

        // Remove duplicates
        // data = Array.from(new Set(data));
        // data = Array.from(new Set(data.map((e) => JSON.stringify(e))));
        return data;
      }

      function parseLatLonFromTableOld() {
        var data = [];
        $("#parseme tr:gt(0)").each(function () {
          // Skip the header row
          const tds = $(this).find("td");
          const stationId = $(tds[10]).text().trim();
          const latitudeStr = $(tds[18]).text().trim();
          const longitudeStr = $(tds[19]).text().trim();

          var latPlusMinus = 1;
          if (longitudeStr.charAt(0) === "-") {
            latPlusMinus = -1;
          }

          const latArray = latitudeStr.split(" ");
          const lonArray = longitudeStr.split(" ");

          const minutes = 60;
          const seconds = minutes * 60;

          const latitude = (
            parseInt(latArray[0]) +
            parseInt(latArray[1]) / minutes +
            parseInt(latArray[2]) / seconds
          ).toFixed(5);

          const longitude = (
            parseInt(lonArray[0]) +
            parseInt(lonArray[1]) / minutes +
            parseInt(lonArray[2]) / seconds
          ).toFixed(5);

          // Skip any elements that have NaN Lat or Lon
          if (!(isNaN(latitude) || isNaN(longitude))) {
            // Push the first row that has valid Lat Lon
            if (data.length == 0) {
              data.push({
                stationId: stationId,
                latitude: latitude,
                longitude: longitude,
              });
              console.log("First Entry");
              // Don't push if the station ID already exists
            } else if (stationId !== data[data.length - 1].stationId) {
              data.push({
                stationId: stationId,
                latitude: latitude,
                longitude: longitude,
              });
              console.log("Pushing station " + stationId);
            } else {
              console.log("Duplicate Station " + stationId);
            }
          }
        });

        // https://documentation.sas.com/doc/en/etsug/15.2/etsug_sasenoaa_details02.htm

        // Remove duplicates
        // data = Array.from(new Set(data));
        // data = Array.from(new Set(data.map((e) => JSON.stringify(e))));
        return data;
      }

      $(document).ready(function () {
        const parsedData = parseLatLonFromTable();
        console.log(parsedData.length);
        console.log(parsedData);

        console.log("Hi");
        var myStations = findNearestStations(41.7472, -111.7435, 4);
        console.log(myStations);
        //$("#json-output").text(JSON.stringify(parsedData, null, 2));
      });
    </script>

    <h2>JSON Output</h2>
    <pre id="json-output"></pre>

    <script>
      $(document).ready(function () {
        // URL of the page to scrape
        const url =
          "https://documentation.sas.com/doc/en/etsug/15.2/etsug_sasenoaa_details02.htm";

        // Fetch the page
        $.get(url, function (response) {
          const parser = new DOMParser();
          const doc = parser.parseFromString(response, "text/html");

          const data = [];
          const rows = doc.querySelectorAll("table.aa-tabular tbody tr"); // Adjust selector to target the correct table

          rows.forEach((row, index) => {
            console.log(index);
            if (index === 0) return; // Skip header row

            const cells = row.querySelectorAll("td");
            if (cells.length === 0) return;

            const city = cells[3].textContent.trim();
            const state = cells[4].textContent.trim();
            const icao = cells[2].textContent.trim();
            const latitude = cells[9].textContent.trim();
            const longitude = cells[10].textContent.trim();

            data.push({
              city: city,
              state: state,
              icao: icao,
              latitude: latitude,
              longitude: longitude,
            });
          });

          $("#json-output").text(JSON.stringify(data, null, 2));
          console.log(data);
        });
      });
    </script>
  </body>
</html>
